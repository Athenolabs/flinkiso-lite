<?php

//
//File: application/Controller/Component/CtrlComponent.php
// Component rewritten, original from : http://cakebaker.42dh.com/2006/07/21/how-to-list-all-controllers/
//

class CtrlComponent extends Component {

    /**
     * Return an array of user Controllers and their methods.
     * The function will exclude ApplicationController methods
     * @return array
     */
    public function get() {

        $aCtrlClasses = App::objects('controller');
        foreach ($aCtrlClasses as $controller) {
            if ($controller != 'AppController') {
                App::import('Controller', str_replace('Controller', '', $controller));
                $aMethods = get_class_methods($controller);
                foreach ($aMethods as $idx => $method) {
                    if ($method{0} == '_') {
                        unset($aMethods[$idx]);
                    }
                }
                App::import('Controller', 'AppController');
                $parentActions = get_class_methods('AppController');
                $controllers[$controller] = array_diff($aMethods, $parentActions);
            }
        }

        return $controllers;
    }

	public function get_defaults(){
		$default_access ='{"user_access":{"change_addition_deletion_requests":{"view":"0","index":"0","advanced_search":"0","add":"0","add_ajax":"0","lists":"0","edit":"0","delete":"0","purge":"0","delete_all":"0","purge_all":"0","restore":"0","restore_all":"0"},"document_amendment_record_sheets":{"view":"0","index":"0","advanced_search":"0","add":"0","add_ajax":"0","lists":"0","edit":"0","delete":"0","purge":"0","delete_all":"0","purge_all":"0","restore":"0","restore_all":"0"},"meetings":{"view":"0","index":"0","advanced_search":"0","edit":"0","after_meeting":"0","meeting_detail_lists":"0","before_meeting_view":"0","add":"0","add_ajax":"0","add_meeting_topics":"0","lists":"0","delete":"0","purge":"0","delete_all":"0","purge_all":"0","restore":"0","restore_all":"0","add_after_meeting_topics":1,"meeting_view":1},"internal_audits":{"add":"0","add_ajax":"0","lists":"0","get_questions":"0","delete":"0","purge":"0","delete_all":"0","purge_all":"0","restore":"0","restore_all":"0","send_email":1,"audit_details_add_ajax":1},"internal_audit_plans":{"view":"0","index":"0","advanced_search":"0","view_plan":"0","add":"0","plan_add_ajax":"0","lists":"0","edit":"0","delete":"0","purge":"0","delete_all":"0","purge_all":"0","restore":"0","restore_all":"0","get_dept_clauses":1,"add_branches":1,"add_departments":1},"corrective_preventive_actions":{"view":"0","index":"0","advanced_search":"0","capa_assigned":"0","get_capa_index":"0","get_ncs":"0","capa_advanced_search":"0","capa_status":"0","add":"0","add_ajax":"0","lists":"0","edit":"0","delete":"0","purge":"0","delete_all":"0","purge_all":"0","restore":"0","restore_all":"0","get_details":1},"capa_categories":{"view":"0","index":"0","advanced_search":"0","add":"0","add_ajax":"0","lists":"0","edit":"0","delete":"0","purge":"0","delete_all":"0","purge_all":"0","restore":"0","restore_all":"0"},"capa_sources":{"view":"0","index":"0","advanced_search":"0","add":"0","add_ajax":"0","lists":"0","edit":"0","delete":"0","purge":"0","delete_all":"0","purge_all":"0","restore":"0","restore_all":"0"},"tasks":{"view":"0","index":"0","advanced_search":"0","add":"0","add_ajax":"0","lists":"0","edit":"0","get_task_name":"0","delete":"0","purge":"0","delete_all":"0","purge_all":"0","restore":"0","restore_all":"0","get_task":1},"benchmarks":{"view":"0","index":"0","advanced_search":"0","delete":"0","purge":"0","delete_all":"0","purge_all":"0","restore":"0","restore_all":"0"},"training_need_identifications":{"view":"0","index":"0","advanced_search":"0","add":"0","add_ajax":"0","lists":"0","edit":"0","delete":"0","purge":"0","delete_all":"0","purge_all":"0","restore":"0","restore_all":"0"},"courses":{"view":"0","index":"0","advanced_search":"0","add":"0","add_ajax":"0","lists":"0","edit":"0","delete":"0","purge":"0","delete_all":"0","purge_all":"0","restore":"0","restore_all":"0"},"course_types":{"view":"0","index":"0","advanced_search":"0","add":"0","add_ajax":"0","lists":"0","edit":"0","delete":"0","purge":"0","delete_all":"0","purge_all":"0","restore":"0","restore_all":"0"},"training_evaluations":{"view":"0","index":"0","advanced_search":"0","add":"0","add_ajax":"0","lists":"0","edit":"0","delete":"0","purge":"0","delete_all":"0","purge_all":"0","restore":"0","restore_all":"0"},"competency_mappings":{"view":"0","index":"0","advanced_search":"0","add":"0","add_ajax":"0","lists":"0","edit":"0","delete":"0","purge":"0","delete_all":"0","purge_all":"0","restore":"0","restore_all":"0"},"trainings":{"view":"0","index":"0","advanced_search":"0","add":"0","add_ajax":"0","lists":"0","edit":"0","delete":"0","purge":"0","delete_all":"0","purge_all":"0","restore":"0","restore_all":"0","get_details":1},"trainers":{"view":"0","index":"0","advanced_search":"0","add":"0","add_ajax":"0","lists":"0","edit":"0","delete":"0","purge":"0","delete_all":"0","purge_all":"0","restore":"0","restore_all":"0"},"trainer_types":{"view":"0","index":"0","advanced_search":"0","add":"0","add_ajax":"0","lists":"0","edit":"0","delete":"0","purge":"0","delete_all":"0","purge_all":"0","restore":"0","restore_all":"0"},"appraisals":{"view":"0","index":"0","advanced_search":"0","add":"0","add_ajax":"0","lists":"0","edit":"0","appraisal_review":1,"delete":"0","purge":"0","delete_all":"0","purge_all":"0","restore":"0","restore_all":"0","appraisal_notification_email":1,"self_appraisals":1,"add_questions":1},"appraisal_questions":{"view":"0","index":"0","advanced_search":"0","add":"0","add_ajax":"0","lists":"0","edit":"0","delete":"0","purge":"0","delete_all":"0","purge_all":"0","restore":"0","restore_all":"0"},"customer_meetings":{"view":"0","index":"0","advanced_search":"0","add":"0","add_ajax":"0","lists":"0","edit":"0","delete":"0","purge":"0","delete_all":"0","purge_all":"0","restore":"0","restore_all":"0","followup_count":1,"add_followups":0},"proposals":{"view":"0","index":"0","advanced_search":"0","add":"0","add_ajax":"0","lists":"0","edit":"0","delete":"0","purge":"0","delete_all":"0","purge_all":"0","restore":"0","restore_all":"0"},"proposal_followups":{"view":"0","index":"0","advanced_search":"0","add":"0","add_ajax":"0","lists":"0","edit":"0","delete":"0","purge":"0","delete_all":"0","purge_all":"0","restore":"0","restore_all":"0","followup_count":1},"supplier_registrations":{"view":"0","index":"0","advanced_search":"0","add":"0","add_ajax":"0","lists":"0","edit":"0","delete":"0","purge":"0","delete_all":"0","purge_all":"0","restore":"0","restore_all":"0","get_supplier_registration_title":1},"supplier_categories":{"view":"0","index":"0","advanced_search":"0","add":"0","add_ajax":"0","lists":"0","edit":"0","delete":"0","purge":"0","delete_all":"0","purge_all":"0","restore":"0","restore_all":"0"},"list_of_acceptable_suppliers":{"view":"0","index":"0","advanced_search":"0","add":"0","add_ajax":"0","lists":"0","edit":"0","delete":"0","purge":"0","delete_all":"0","purge_all":"0","restore":"0","restore_all":"0"},"supplier_evaluation_reevaluations":{"view":"0","index":"0","advanced_search":"0","evaluate":"0","delete":"0","purge":"0","delete_all":"0","purge_all":"0","restore":"0","restore_all":"0","get_supplier_list":0},"summery_of_supplier_evaluations":{"view":"0","index":"0","advanced_search":"0","add":"0","add_ajax":"0","lists":"0","edit":"0","delete":"0","purge":"0","delete_all":"0","purge_all":"0","restore":"0","restore_all":"0"},"delivery_challans":{"view":"0","index":"0","advanced_search":"0","inbound":"0","outbound":"0","add":"0","add_ajax":"0","lists":"0","edit":"0","delete":"0","purge":"0","delete_all":"0","purge_all":"0","restore":"0","restore_all":"0","get_purchase_order":1,"get_challan_details":1,"get_challan_number":1,"get_delivered_material_qc":1},"purchase_orders":{"view":"0","index":"0","advanced_search":"0","add":"0","add_ajax":"0","lists":"0","edit":"0","delete":"0","purge":"0","delete_all":"0","purge_all":"0","restore":"0","restore_all":"0","add_purchase_order_details":1,"get_purchase_order_number":1},"fire_extinguishers":{"view":"0","index":"0","advanced_search":"0","add":"0","add_ajax":"0","lists":"0","edit":"0","delete":"0","purge":"0","delete_all":"0","purge_all":"0","restore":"0","restore_all":"0"},"housekeeping_checklists":{"view":"0","index":"0","advanced_search":"0","add":"0","add_ajax":"0","lists":"0","edit":"0","delete":"0","purge":"0","delete_all":"0","purge_all":"0","restore":"0","restore_all":"0"},"housekeeping_responsibilities":{"view":"0","index":"0","advanced_search":"0","add":"0","add_ajax":"0","lists":"0","edit":"0","delete":"0","purge":"0","delete_all":"0","purge_all":"0","restore":"0","restore_all":"0"},"fire_extinguisher_types":{"view":"0","index":"0","advanced_search":"0","add":"0","add_ajax":"0","lists":"0","edit":"0","delete":"0","purge":"0","delete_all":"0","purge_all":"0","restore":"0","restore_all":"0"},"customer_complaints":{"view":"0","index":"0","advanced_search":"0","add":"0","add_ajax":"0","lists":"0","edit":"0","check_complaint_number":1,"delete":"0","purge":"0","delete_all":"0","purge_all":"0","restore":"0","restore_all":"0","get_customer_complaints":1,"customer_complaint_status":1},"list_of_measuring_devices_for_calibrations":{"view":"0","index":"0","advanced_search":"0","delete":"0","purge":"0","delete_all":"0","purge_all":"0","restore":"0","restore_all":"0"},"calibrations":{"view":"0","index":"0","advanced_search":"0","add":"0","add_ajax":"0","lists":"0","edit":"0","delete":"0","purge":"0","delete_all":"0","purge_all":"0","restore":"0","restore_all":"0","get_details":1,"get_next_calibration":1},"customer_feedbacks":{"view":"0","index":"0","advanced_search":"0","add":"0","add_ajax":"0","lists":"0","edit":"0","delete":"0","purge":"0","delete_all":"0","purge_all":"0","restore":"0","restore_all":"0"},"customer_feedback_questions":{"view":"0","index":"0","advanced_search":"0","add":"0","add_ajax":"0","lists":"0","edit":"0","delete":"0","purge":"0","delete_all":"0","purge_all":"0","restore":"0","restore_all":"0"},"material_quality_checks":{"view":"0","index":"0","advanced_search":"0","add":"0","add_ajax":"0","lists":"0","edit":"0","quality_check":"0","delete":"0","purge":"0","delete_all":"0","purge_all":"0","restore":"0","restore_all":"0","get_process":1,"get_material_check":1,"material_count":1},"device_maintenances":{"view":"0","index":"0","advanced_search":"0","add":"0","add_ajax":"0","lists":"0","edit":"0","delete":"0","purge":"0","delete_all":"0","purge_all":"0","restore":"0","restore_all":"0","get_device_maintainance":1},"username_password_details":{"view":"0","index":"0","advanced_search":"0","add":"0","add_ajax":"0","lists":"0","edit":"0","delete":"0","purge":"0","delete_all":"0","purge_all":"0","restore":"0","restore_all":"0"},"list_of_computers":{"view":"0","index":"0","advanced_search":"0","add":"0","add_ajax":"0","lists":"0","edit":"0","delete":"0","purge":"0","delete_all":"0","purge_all":"0","restore":"0","restore_all":"0","add_new_software":1},"list_of_softwares":{"view":"0","index":"0","advanced_search":"0","add":"0","add_ajax":"0","lists":"0","edit":"0","delete":"0","purge":"0","delete_all":"0","purge_all":"0","restore":"0","restore_all":"0"},"list_of_computer_list_of_softwares":{"view":"0","index":"0","advanced_search":"0","add":"0","add_ajax":"0","lists":"0","edit":"0","delete":"0","purge":"0","delete_all":"0","purge_all":"0","restore":"0","restore_all":"0"},"databackup_logbooks":{"view":"0","index":"0","advanced_search":"0","delete":"0","purge":"0","delete_all":"0","purge_all":"0","restore":"0","restore_all":"0"},"daily_backup_details":{"view":"0","index":"0","advanced_search":"0","add":"0","add_ajax":"0","lists":"0","edit":"0","delete":"0","purge":"0","delete_all":"0","purge_all":"0","restore":"0","restore_all":"0"},"data_back_ups":{"view":"0","index":"0","advanced_search":"0","add":"0","add_ajax":"0","lists":"0","edit":"0","delete":"0","purge":"0","delete_all":"0","purge_all":"0","restore":"0","restore_all":"0"},"materials":{"view":"0","index":"0","advanced_search":"0","add":"0","add_ajax":"0","lists":"0","edit":"0","delete":"0","purge":"0","delete_all":"0","purge_all":"0","restore":"0","restore_all":"0","get_material_name":1,"get_material_qc_required":1,"get_purchase_order_number":1},"productions":{"view":"0","index":"0","advanced_search":"0","add":"0","add_ajax":"0","lists":"0","edit":"0","get_batch":1,"delete":"0","purge":"0","delete_all":"0","purge_all":"0","restore":"0","restore_all":"0"},"stocks":{"view":"0","index":"0","advanced_search":"0","add":"0","add_ajax":"0","lists":"0","edit":"0","stock_status":"0","get_material_details":1,"delete":"0","purge":"0","delete_all":"0","purge_all":"0","restore":"0","restore_all":"0","get_material":1,"get_dc_details":1},"branches":{"view":"0","index":"0","advanced_search":"0","add":"0","add_ajax":"0","lists":"0","edit":"0","delete":"0","purge":"0","delete_all":"0","purge_all":"0","restore":"0","restore_all":"0","get_branch_name":1},"departments":{"view":"0","index":"0","advanced_search":"0","add":"0","add_ajax":"0","lists":"0","edit":"0","delete":"0","purge":"0","delete_all":"0","purge_all":"0","restore":"0","restore_all":"0"},"designations":{"view":"0","index":"0","advanced_search":"0","add":"0","add_ajax":"0","lists":"0","edit":"0","delete":"0","purge":"0","delete_all":"0","purge_all":"0","restore":"0","restore_all":"0"},"employees":{"view":"0","index":"0","advanced_search":"0","employee_kra":"0","add":"0","add_ajax":"0","lists":"0","edit":"0","delete":"0","purge":"0","delete_all":"0","purge_all":"0","restore":"0","restore_all":"0","get_employee_email":1},"users":{"welcome":1,"view":"0","index":"0","advanced_search":"0","remove_sample":"0","insert_sample_data":"0","sample_file_upload":"0","add":"0","add_ajax":"0","lists":"0","edit":"0","check_username":"0","appraisal_answers":"0","smtp_details":"0","dashboard_files":"0","delete":"0","purge":"0","delete_all":"0","purge_all":"0","restore":"0","restore_all":"0","reset_password":1,"save_user_password":1,"login":1,"logout":1,"dashboard":1,"access_denied":1,"terms_and_conditions":1,"branches_gauge":1,"change_password":1,"check_email":1,"activate":1,"unblock_user":1,"register":1},"products":{"view":"0","product_design":"0","index":"0","product_upload":"0","add":"0","add_ajax":"0","lists":"0","edit":"0","delete":"0","purge":"0","delete_all":"0","purge_all":"0","restore":"0","restore_all":"0"},"devices":{"view":"0","index":"0","advanced_search":"0","add":"0","add_ajax":"0","lists":"0","edit":"0","delete":"0","purge":"0","delete_all":"0","purge_all":"0","restore":"0","restore_all":"0"},"customers":{"view":"0","index":"0","advanced_search":"0","add":"0","add_ajax":"0","lists":"0","edit":"0","delete":"0","purge":"0","delete_all":"0","purge_all":"0","restore":"0","restore_all":"0","get_unique_values":1},"software_types":{"view":"0","index":"0","advanced_search":"0","add":"0","add_ajax":"0","lists":"0","edit":"0","delete":"0","purge":"0","delete_all":"0","purge_all":"0","restore":"0","restore_all":"0"},"training_types":{"view":"0","index":"0","advanced_search":"0","add":"0","add_ajax":"0","lists":"0","edit":"0","delete":"0","purge":"0","delete_all":"0","purge_all":"0","restore":"0","restore_all":"0"},"dashboards":{"mr":1,"hr":1,"bd":1,"production":1,"personal_admin":1,"quality_control":1,"edp":1,"purchase":1,"result_mapping":1},"errors":{"error500":1,"error404":1},"helps":{"view":1,"edit":1,"help":1},"message_user_sents":{"index":1,"view":1,"add":1,"edit":1,"delete":1,"delete_all":1},"message_user_thrashes":{"index":1,"view":1,"add":1,"edit":1,"delete":1,"delete_all":1},"messages":{"inbox":1,"sent":1,"trash":1,"reply":1,"index":1,"view":1,"add":1,"edit":1,"delete":1,"delete_all":1},"notification_users":{"display_notifications_initial":1,"display_notifications":1},"notifications":{"box":1,"search":1,"advanced_search":1,"lists":1,"index":1,"view":1,"add_ajax":0,"edit":0,"delete":1,"delete_all":1},"suggestion_forms":{"box":1,"search":1,"advanced_search":1,"lists":1,"index":1,"view":1,"add_ajax":1,"edit":1,"delete":1,"delete_all":1}}}';

        return $default_access;
	}
}