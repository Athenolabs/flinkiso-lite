(function(a){a.fn.idleTimeout=function(m){var g={inactivity:1200000,noconfirm:10000,sessionAlive:30000,click_reset:true,alive_url:"/js_sandbox/",logout_url:"/js_sandbox/",showDialog:true,lefttime:0};var b=a.extend(g,m);var c,h,d;var j="<div id='modal_pop'>You have "+b.lefttime+" minutes left. Your test will get auto submitted on time completion.</div>";var e=function(){clearTimeout(c);clearTimeout(h);c=setTimeout(l,b.inactivity);if(b.sessionAlive){clearTimeout(d);d=setTimeout(k,b.sessionAlive)}};var l=function(){h=setTimeout(i,b.noconfirm);if(b.showDialog){a(j).dialog({buttons:{Close:function(){a(this).dialog("close");f()}},modal:true,title:"Timer Alert"})}};var i=function(){if(b.logout_url){a.get(b.logout_url)}window.location.href=b.redirect_url};var f=function(n){if(b.alive_url){a.get(b.alive_url)}};var k=function(){a.get(b.alive_url);clearTimeout(d);d=setTimeout(k,b.sessionAlive)};return this.each(function(){obj=a(this);e();if(b.click_reset){a(document).bind("click",e)}if(b.sessionAlive){k()}})}})(jQuery);